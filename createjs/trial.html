<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Pokemon Go</title>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
    var stage, tomato, bg, pika, pikachu;
    var keys = {};

    function init() {
    	// =================== STAGE ==========================
        stage = new createjs.Stage("myCanvas");
        // ===========adding a background =====================
        var image1 = new Image();
        image1.src = "background1.jpg";
        image1.onload = handleBgLoad;

        function handleBgLoad(event) {
            var image1 = event.target;
            var bitmap1 = new createjs.Bitmap(image1);
            bg.addChild(bitmap1);
           

            stage.update();
 }

        // ===========Container FOR tomato ====================
        tomato = new createjs.Container();

        // ===========Container FOR bg ====================
        bg = new createjs.Container();

         // ===========Container FOR bg ====================
        pika = new createjs.Container();

        

        // ===========adding image of tomato ==================
        var image = new Image();
        image.src = "tomato.png";
        image.onload = handleImageLoad;

           function handleImageLoad(event) {
            var image = event.target;
            var bitmap = new createjs.Bitmap(image);
            tomato.addChild(bitmap);
            tomato.x = 225;
            tomato.y = 450;
            tomato.scaleX = tomato.scaleY = 1;

            stage.update();
        }

        // ===========sprite of pikachu ========================
        var data = new createjs.SpriteSheet({
        "images": ["pika_sprite.png"],
        "frames": {"regX": 0, "height": 500, "count": 10, "regY": 0, "width": 500},
        "animations": {"eat": 1,
                      "stop": [1, 0]

        }
        });
        pikachu = new createjs.Sprite(data);

        
        // ===========adding image of pikachu ==================
        var image2 = new Image();
        image2.src = "pikachu.png";
        image2.onload = handlePikaLoad;

           function handlePikaLoad(event) {
            var image2 = event.target;
            var bitmap2 = new createjs.Bitmap(image2);
            pika.addChild(bitmap2);

            stage.update();
        }
        
        //============= on press of space bar ==================
        this.document.onkeydown = keydown;
        this.document.onkeyup = keyup;
        //====================================================
        
        stage.addChild(bg);
        //stage.addChild(pika);
        stage.addChild(pikachu);
        stage.addChild(tomato);
        stage.setChildIndex(tomato, stage.getNumChildren() + 1000);
        
        // function to close the mouth of pikachu
        function stop(){
        	pikachu.gotoAndPlay("stop");
        }

        //====================================================================================
           // =============== function called after pressing of space bar ====================
        //====================================================================================
        function keydown(event) {
            keys[event.keyCode] = true;

            if (keys[32]) {

          // ================= calling pikachu sprite to open mouth  =========================
            pikachu.gotoAndPlay("eat");

         //=================== Tween for tomato (movement) ===================================
                createjs.Tween.get(tomato).to({
                        x: 225,
                        y: 450,
                        scaleX: 1,
                        scaleY: 1
                    }).to({
                        x: 210,
                        y: 180,
                        scaleX: 1.5,
                        scaleY: 1.5
                    }, 1000, createjs.Ease.quadOut)
                    .to({
                        x: 245,
                        y: 275,
                        scaleX: 0,
                        scaleY: 0
                    }, 1000, createjs.Ease.quadOut).call(stop);

                createjs.Ticker.setFPS(60);
                createjs.Ticker.addEventListener("tick", stage);

            }

          
            stage.update();
        }

        function keyup(event) {

            delete keys[event.keyCode];
        }

    }

    </script>
</head>

<body onload="init();">
    <canvas id="myCanvas" width="500" height="500"></canvas>
    <script src="https://code.createjs.com/preloadjs-0.6.2.min.js"></script>
    <script src="https://code.createjs.com/tweenjs-0.6.2.min.js"></script>
    <!--<script src="http://code.createjs.com/soundjs-0.5.2.min.js"/> -->
    <script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>
</body>

</html>
